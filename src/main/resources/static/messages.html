<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>我的预约 - 医院管理系统</title>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.7.0/dist/jquery.min.js"></script>
</head>
<body>
<div id="root"></div>

<script type="text/babel">
    const { useState, useEffect } = React;

    function AppointmentsPage() {
        const [appointments, setAppointments] = useState([]);
        const [loading, setLoading] = useState(true);
        const [user, setUser] = useState(null);
        const [exporting, setExporting] = useState(false);
        const [message, setMessage] = useState('');
        const [messageType, setMessageType] = useState('');

        useEffect(() => {
            // 获取用户信息
            const userData = localStorage.getItem('user');
            if (userData) {
                const parsedUser = JSON.parse(userData);
                setUser(parsedUser);
                fetchAppointments(parsedUser.username);
            } else {
                setLoading(false);
            }

            // 初始化图标
            setTimeout(() => {
                if (typeof lucide !== 'undefined') {
                    lucide.createIcons();
                }
            }, 100);
        }, []);

        const fetchAppointments = (username) => {
            try {
                $.get('/api/appointment/list/' + username, function(list) {
                    setAppointments(list);
                    setLoading(false);
                }).fail(function() {
                    console.error("获取预约列表失败");
                    setMessage('获取预约列表失败，请稍后重试');
                    setMessageType('error');
                    setLoading(false);
                });
            } catch (error) {
                console.error("获取预约列表失败:", error);
                setMessage('获取预约列表失败，请稍后重试');
                setMessageType('error');
                setLoading(false);
            }
        };

        const handleExportAppointments = () => {
            if (!user) {
                setMessage('请先登录');
                setMessageType('error');
                return;
            }

            setExporting(true);
            try {
                window.open('/api/appointment/export/' + user.username, '_blank');
                setMessage('导出成功！文件将自动下载');
                setMessageType('success');

                setTimeout(() => {
                    setMessage('');
                    setMessageType('');
                }, 3000);
            } catch (error) {
                setMessage('导出失败，请重试');
                setMessageType('error');
            } finally {
                setExporting(false);
            }
        };

        const handleStartConsultation = (appointment) => {
            // 跳转到在线问诊页面，传递预约ID
            window.location.href = `message.html?appointmentId=${appointment.id}`;
        };

        const getStatusInfo = (status) => {
            switch (status) {
                case "booked":
                    return {
                        label: "已预约",
                        class: "bg-blue-100 text-blue-800 border-blue-200",
                        iconColor: "text-blue-600",
                        icon: "clock-3"
                    };
                case "cancelled":
                    return {
                        label: "已取消",
                        class: "bg-red-100 text-red-800 border-red-200",
                        iconColor: "text-red-600",
                        icon: "x-circle"
                    };
                case "completed":
                    return {
                        label: "已完成",
                        class: "bg-green-100 text-green-800 border-green-200",
                        iconColor: "text-green-600",
                        icon: "check-circle"
                    };
                default:
                    return {
                        label: status,
                        class: "bg-gray-100 text-gray-800 border-gray-200",
                        iconColor: "text-gray-600",
                        icon: "help-circle"
                    };
            }
        };

        const formatDateTime = (dateTime) => {
            const date = new Date(dateTime);
            const now = new Date();
            const isToday = date.toDateString() === now.toDateString();
            const isTomorrow = date.toDateString() === new Date(now.getTime() + 24 * 60 * 60 * 1000).toDateString();

            let dateStr;
            if (isToday) {
                dateStr = '今天';
            } else if (isTomorrow) {
                dateStr = '明天';
            } else {
                dateStr = date.toLocaleDateString('zh-CN', {
                    month: 'long',
                    day: 'numeric',
                    weekday: 'long'
                });
            }

            const timeStr = date.toLocaleTimeString('zh-CN', {
                hour: '2-digit',
                minute: '2-digit'
            });

            return { date: dateStr, time: timeStr };
        };

        const getDoctorInitials = (name) => {
            return name.slice(-2);
        };

        const getStatusCounts = () => {
            return {
                total: appointments.length,
                booked: appointments.filter(app => app.status === 'booked').length,
                completed: appointments.filter(app => app.status === 'completed').length,
                cancelled: appointments.filter(app => app.status === 'cancelled').length
            };
        };

        const canStartConsultation = (appointment) => {
            return appointment.status === 'booked' || appointment.status === 'completed';
        };

        if (loading) {
            return React.createElement('div', {
                className: 'min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50 flex items-center justify-center'
            }, React.createElement('div', {
                className: 'text-center'
            }, [
                React.createElement('div', {
                    key: 'spinner',
                    className: 'animate-spin rounded-full h-16 w-16 border-4 border-blue-200 border-t-blue-600 mx-auto mb-6'
                }),
                React.createElement('div', {
                    key: 'pulse',
                    className: 'flex items-center justify-center space-x-2'
                }, [
                    React.createElement('div', {
                        key: 'dot1',
                        className: 'w-2 h-2 bg-blue-600 rounded-full animate-pulse'
                    }),
                    React.createElement('div', {
                        key: 'dot2',
                        className: 'w-2 h-2 bg-blue-600 rounded-full animate-pulse',
                        style: { animationDelay: '0.2s' }
                    }),
                    React.createElement('div', {
                        key: 'dot3',
                        className: 'w-2 h-2 bg-blue-600 rounded-full animate-pulse',
                        style: { animationDelay: '0.4s' }
                    })
                ]),
                React.createElement('p', {
                    key: 'text',
                    className: 'text-gray-600 mt-4 font-medium'
                }, '正在加载您的预约信息...')
            ]));
        }

        if (!user) {
            return React.createElement('div', {
                className: 'min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50'
            }, [
                // Header
                React.createElement('div', {
                    key: 'header',
                    className: 'bg-white shadow-sm border-b border-blue-100'
                }, React.createElement('div', {
                    className: 'container mx-auto px-4 py-6'
                }, React.createElement('div', {
                    className: 'flex items-center justify-center space-x-3'
                }, [
                    React.createElement('div', {
                        key: 'icon',
                        className: 'p-3 bg-blue-600 rounded-xl shadow-lg'
                    }, React.createElement('i', {
                        'data-lucide': 'calendar-heart',
                        className: 'h-8 w-8 text-white'
                    })),
                    React.createElement('h1', {
                        key: 'title',
                        className: 'text-3xl font-bold text-gray-900'
                    }, '我的预约')
                ]))),

                // Main content
                React.createElement('div', {
                    key: 'main',
                    className: 'container mx-auto px-4 py-12'
                }, React.createElement('div', {
                    className: 'max-w-lg mx-auto'
                }, React.createElement('div', {
                    className: 'bg-white rounded-2xl shadow-xl border border-gray-100 overflow-hidden'
                }, [
                    React.createElement('div', {
                        key: 'header',
                        className: 'bg-gradient-to-r from-blue-600 to-blue-700 px-8 py-6'
                    }, [
                        React.createElement('i', {
                            key: 'icon',
                            'data-lucide': 'user-x',
                            className: 'h-16 w-16 text-blue-100 mx-auto mb-4'
                        }),
                        React.createElement('h3', {
                            key: 'title',
                            className: 'text-xl font-semibold text-white text-center'
                        }, '需要登录访问')
                    ]),
                    React.createElement('div', {
                        key: 'content',
                        className: 'px-8 py-6'
                    }, [
                        React.createElement('p', {
                            key: 'desc',
                            className: 'text-gray-600 text-center mb-8 leading-relaxed'
                        }, '请登录您的账户以查看和管理您的预约信息'),
                        React.createElement('div', {
                            key: 'actions',
                            className: 'space-y-3'
                        }, [
                            React.createElement('a', {
                                key: 'login',
                                href: 'index.html',
                                className: 'block w-full px-6 py-3 bg-blue-600 text-white text-center rounded-xl hover:bg-blue-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl'
                            }, '立即登录'),
                            React.createElement('a', {
                                key: 'register',
                                href: 'index.html',
                                className: 'block w-full px-6 py-3 border-2 border-gray-200 text-gray-700 text-center rounded-xl hover:bg-gray-50 transition-all duration-200 font-medium'
                            }, '注册新账号')
                        ])
                    ])
                ])))
            ]);
        }

        const statusCounts = getStatusCounts();

        return React.createElement('div', {
            className: 'min-h-screen bg-gradient-to-br from-blue-50 via-white to-green-50'
        }, [
            // Header
            React.createElement('div', {
                key: 'header',
                className: 'bg-white shadow-sm border-b border-blue-100'
            }, React.createElement('div', {
                className: 'container mx-auto px-4 py-6'
            }, React.createElement('div', {
                className: 'flex items-center justify-between'
            }, [
                React.createElement('div', {
                    key: 'title',
                    className: 'flex items-center space-x-4'
                }, [
                    React.createElement('div', {
                        key: 'icon',
                        className: 'p-3 bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl shadow-lg'
                    }, React.createElement('i', {
                        'data-lucide': 'calendar-heart',
                        className: 'h-8 w-8 text-white'
                    })),
                    React.createElement('div', { key: 'text' }, [
                        React.createElement('h1', {
                            key: 'h1',
                            className: 'text-3xl font-bold text-gray-900'
                        }, '我的预约'),
                        React.createElement('p', {
                            key: 'p',
                            className: 'text-gray-600 mt-1'
                        }, `欢迎回来，${user.username} | 管理您的医疗预约`)
                    ])
                ]),
                React.createElement('div', {
                    key: 'actions',
                    className: 'flex items-center space-x-3'
                }, [
                    React.createElement('button', {
                        key: 'export',
                        onClick: handleExportAppointments,
                        disabled: exporting || appointments.length === 0,
                        className: 'inline-flex items-center space-x-2 px-5 py-2.5 bg-green-600 text-white rounded-xl hover:bg-green-700 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl font-medium'
                    }, [
                        React.createElement('i', {
                            key: 'icon',
                            'data-lucide': 'download',
                            className: 'h-4 w-4'
                        }),
                        React.createElement('span', { key: 'text' }, exporting ? '导出中...' : '导出记录')
                    ]),
                    React.createElement('a', {
                        key: 'messages',
                        href: 'messages.html',
                        className: 'inline-flex items-center space-x-2 px-5 py-2.5 bg-purple-600 text-white rounded-xl hover:bg-purple-700 transition-all duration-200 shadow-lg hover:shadow-xl font-medium'
                    }, [
                        React.createElement('i', {
                            key: 'icon',
                            'data-lucide': 'message-circle',
                            className: 'h-4 w-4'
                        }),
                        React.createElement('span', { key: 'text' }, '我的咨询')
                    ]),
                    React.createElement('a', {
                        key: 'back',
                        href: 'main.html',
                        className: 'inline-flex items-center space-x-2 px-5 py-2.5 border-2 border-blue-200 text-blue-700 rounded-xl hover:bg-blue-50 transition-all duration-200 font-medium'
                    }, [
                        React.createElement('i', {
                            key: 'icon',
                            'data-lucide': 'arrow-left',
                            className: 'h-4 w-4'
                        }),
                        React.createElement('span', { key: 'text' }, '返回预约')
                    ])
                ])
            ]))),

            // Message Alert
            message && React.createElement('div', {
                key: 'message',
                className: 'container mx-auto px-4 pt-4'
            }, React.createElement('div', {
                className: `p-4 rounded-xl flex items-center space-x-3 ${
                    messageType === 'success'
                        ? 'bg-green-50 border border-green-200 text-green-800'
                        : 'bg-red-50 border border-red-200 text-red-800'
                }`
            }, [
                React.createElement('i', {
                    key: 'icon',
                    'data-lucide': messageType === 'success' ? 'check-circle' : 'alert-circle',
                    className: `h-5 w-5 ${messageType === 'success' ? 'text-green-600' : 'text-red-600'}`
                }),
                React.createElement('span', {
                    key: 'text',
                    className: 'font-medium'
                }, message)
            ])),

            // Main Content
            React.createElement('div', {
                key: 'main',
                className: 'container mx-auto px-4 py-8'
            }, [
                // Stats Cards
                React.createElement('div', {
                    key: 'stats',
                    className: 'grid grid-cols-2 md:grid-cols-4 gap-6 mb-8'
                }, [
                    React.createElement('div', {
                        key: 'total',
                        className: 'bg-white rounded-2xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200'
                    }, [
                        React.createElement('div', {
                            key: 'header',
                            className: 'flex items-center justify-between mb-4'
                        }, [
                            React.createElement('div', {
                                key: 'icon',
                                className: 'p-3 bg-blue-100 rounded-xl'
                            }, React.createElement('i', {
                                'data-lucide': 'calendar',
                                className: 'h-6 w-6 text-blue-600'
                            })),
                            React.createElement('div', {
                                key: 'indicator',
                                className: 'w-3 h-3 bg-blue-500 rounded-full'
                            })
                        ]),
                        React.createElement('div', { key: 'content' }, [
                            React.createElement('p', {
                                key: 'value',
                                className: 'text-3xl font-bold text-gray-900 mb-1'
                            }, statusCounts.total),
                            React.createElement('p', {
                                key: 'label',
                                className: 'text-sm font-medium text-gray-600'
                            }, '总预约数')
                        ])
                    ]),
                    React.createElement('div', {
                        key: 'booked',
                        className: 'bg-white rounded-2xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200'
                    }, [
                        React.createElement('div', {
                            key: 'header',
                            className: 'flex items-center justify-between mb-4'
                        }, [
                            React.createElement('div', {
                                key: 'icon',
                                className: 'p-3 bg-orange-100 rounded-xl'
                            }, React.createElement('i', {
                                'data-lucide': 'clock-3',
                                className: 'h-6 w-6 text-orange-600'
                            })),
                            React.createElement('div', {
                                key: 'indicator',
                                className: 'w-3 h-3 bg-orange-500 rounded-full animate-pulse'
                            })
                        ]),
                        React.createElement('div', { key: 'content' }, [
                            React.createElement('p', {
                                key: 'value',
                                className: 'text-3xl font-bold text-gray-900 mb-1'
                            }, statusCounts.booked),
                            React.createElement('p', {
                                key: 'label',
                                className: 'text-sm font-medium text-gray-600'
                            }, '待就诊')
                        ])
                    ]),
                    React.createElement('div', {
                        key: 'completed',
                        className: 'bg-white rounded-2xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200'
                    }, [
                        React.createElement('div', {
                            key: 'header',
                            className: 'flex items-center justify-between mb-4'
                        }, [
                            React.createElement('div', {
                                key: 'icon',
                                className: 'p-3 bg-green-100 rounded-xl'
                            }, React.createElement('i', {
                                'data-lucide': 'check-circle',
                                className: 'h-6 w-6 text-green-600'
                            })),
                            React.createElement('div', {
                                key: 'indicator',
                                className: 'w-3 h-3 bg-green-500 rounded-full'
                            })
                        ]),
                        React.createElement('div', { key: 'content' }, [
                            React.createElement('p', {
                                key: 'value',
                                className: 'text-3xl font-bold text-gray-900 mb-1'
                            }, statusCounts.completed),
                            React.createElement('p', {
                                key: 'label',
                                className: 'text-sm font-medium text-gray-600'
                            }, '已完成')
                        ])
                    ]),
                    React.createElement('div', {
                        key: 'cancelled',
                        className: 'bg-white rounded-2xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200'
                    }, [
                        React.createElement('div', {
                            key: 'header',
                            className: 'flex items-center justify-between mb-4'
                        }, [
                            React.createElement('div', {
                                key: 'icon',
                                className: 'p-3 bg-red-100 rounded-xl'
                            }, React.createElement('i', {
                                'data-lucide': 'x-circle',
                                className: 'h-6 w-6 text-red-600'
                            })),
                            React.createElement('div', {
                                key: 'indicator',
                                className: 'w-3 h-3 bg-red-500 rounded-full'
                            })
                        ]),
                        React.createElement('div', { key: 'content' }, [
                            React.createElement('p', {
                                key: 'value',
                                className: 'text-3xl font-bold text-gray-900 mb-1'
                            }, statusCounts.cancelled),
                            React.createElement('p', {
                                key: 'label',
                                className: 'text-sm font-medium text-gray-600'
                            }, '已取消')
                        ])
                    ])
                ]),

                // Feature Info Card
                appointments.length > 0 && React.createElement('div', {
                    key: 'feature-info',
                    className: 'mb-8 bg-gradient-to-r from-blue-50 to-green-50 rounded-2xl border border-blue-200 p-6'
                }, React.createElement('div', {
                    className: 'flex items-start space-x-4'
                }, [
                    React.createElement('div', {
                        key: 'icon',
                        className: 'p-3 bg-blue-600 rounded-xl shadow-lg'
                    }, React.createElement('i', {
                        'data-lucide': 'message-circle-heart',
                        className: 'h-6 w-6 text-white'
                    })),
                    React.createElement('div', { key: 'content' }, [
                        React.createElement('h3', {
                            key: 'title',
                            className: 'text-lg font-semibold text-gray-900 mb-2'
                        }, '在线咨询服务'),
                        React.createElement('p', {
                            key: 'desc',
                            className: 'text-gray-600 leading-relaxed'
                        }, '您可以通过"发起咨询"按钮与您的预约医生进行在线交流，获得专业的医疗建议和指导。'),
                        React.createElement('div', {
                            key: 'features',
                            className: 'mt-4 flex flex-wrap gap-3'
                        }, [
                            React.createElement('span', {
                                key: 'f1',
                                className: 'inline-flex items-center px-3 py-1 bg-blue-100 text-blue-800 rounded-full text-sm font-medium'
                            }, [
                                React.createElement('i', {
                                    key: 'icon',
                                    'data-lucide': 'shield-check',
                                    className: 'h-3 w-3 mr-1'
                                }),
                                '安全私密'
                            ]),
                            React.createElement('span', {
                                key: 'f2',
                                className: 'inline-flex items-center px-3 py-1 bg-green-100 text-green-800 rounded-full text-sm font-medium'
                            }, [
                                React.createElement('i', {
                                    key: 'icon',
                                    'data-lucide': 'clock',
                                    className: 'h-3 w-3 mr-1'
                                }),
                                '实时回复'
                            ]),
                            React.createElement('span', {
                                key: 'f3',
                                className: 'inline-flex items-center px-3 py-1 bg-purple-100 text-purple-800 rounded-full text-sm font-medium'
                            }, [
                                React.createElement('i', {
                                    key: 'icon',
                                    'data-lucide': 'user-check',
                                    className: 'h-3 w-3 mr-1'
                                }),
                                '专业医生'
                            ])
                        ])
                    ])
                ])),

                // Appointments List
                React.createElement('div', {
                        key: 'appointments',
                        className: 'space-y-6'
                    }, appointments.length === 0 ?
                        React.createElement('div', {
                            className: 'bg-white rounded-2xl shadow-lg border border-gray-100 text-center py-16'
                        }, [
                            React.createElement('div', {
                                key: 'icon',
                                className: 'mx-auto mb-6 p-4 bg-gray-100 rounded-full w-fit'
                            }, React.createElement('i', {
                                'data-lucide': 'calendar-x',
                                className: 'h-16 w-16 text-gray-400'
                            })),
                            React.createElement('h3', {
                                key: 'title',
                                className: 'text-xl font-semibold text-gray-900 mb-3'
                            }, '暂无预约记录'),
                            React.createElement('p', {
                                key: 'desc',
                                className: 'text-gray-600 mb-8 max-w-md mx-auto leading-relaxed'
                            }, '您还没有任何预约记录。立即预约专业医生，开始您的健康管理之旅。'),
                            React.createElement('a', {
                                key: 'link',
                                href: 'main.html',
                                className: 'inline-flex items-center px-8 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl'
                            }, [
                                React.createElement('i', {
                                    key: 'icon',
                                    'data-lucide': 'plus',
                                    className: 'h-5 w-5 mr-2'
                                }),
                                '立即预约医生'
                            ])
                        ]) :
                        appointments.map((appointment, index) => {
                            const statusInfo = getStatusInfo(appointment.status);
                            const dateTime = formatDateTime(appointment.appointmentTime);
                            const canConsult = canStartConsultation(appointment);

                            return React.createElement('div', {
                                key: index,
                                className: 'bg-white rounded-2xl shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-200 overflow-hidden'
                            }, [
                                // Card Header
                                React.createElement('div', {
                                    key: 'header',
                                    className: 'bg-gradient-to-r from-blue-50 to-green-50 px-6 py-4 border-b border-gray-100'
                                }, React.createElement('div', {
                                    className: 'flex items-center justify-between'
                                }, [
                                    React.createElement('div', {
                                        key: 'doctor',
                                        className: 'flex items-center space-x-4'
                                    }, [
                                        React.createElement('div', {
                                            key: 'avatar',
                                            className: 'w-14 h-14 bg-gradient-to-r from-blue-600 to-blue-700 rounded-xl flex items-center justify-center shadow-lg'
                                        }, React.createElement('span', {
                                            className: 'text-white font-bold text-lg'
                                        }, getDoctorInitials(appointment.doctor.name))),
                                        React.createElement('div', { key: 'info' }, [
                                            React.createElement('h3', {
                                                key: 'name',
                                                className: 'text-xl font-bold text-gray-900'
                                            }, appointment.doctor.name),
                                            React.createElement('p', {
                                                key: 'dept',
                                                className: 'text-gray-600 font-medium'
                                            }, `${appointment.doctor.department} · ${appointment.doctor.title}`)
                                        ])
                                    ]),
                                    React.createElement('div', {
                                        key: 'status',
                                        className: `px-4 py-2 rounded-xl border ${statusInfo.class} flex items-center space-x-2`
                                    }, [
                                        React.createElement('i', {
                                            key: 'icon',
                                            'data-lucide': statusInfo.icon,
                                            className: `h-4 w-4 ${statusInfo.iconColor}`
                                        }),
                                        React.createElement('span', {
                                            key: 'text',
                                            className: 'font-semibold'
                                        }, statusInfo.label)
                                    ])
                                ])),

                                // Card Content
                                React.createElement('div', {
                                    key: 'content',
                                    className: 'p-6'
                                }, [
                                    // Appointment Details
                                    React.createElement('div', {
                                        key: 'details',
                                        className: 'grid grid-cols-1 md:grid-cols-2 gap-6 mb-6'
                                    }, [
                                        React.createElement('div', {
                                            key: 'time',
                                            className: 'flex items-center space-x-3 p-4 bg-blue-50 rounded-xl border border-blue-100'
                                        }, [
                                            React.createElement('div', {
                                                key: 'icon',
                                                className: 'p-2 bg-blue-600 rounded-lg'
                                            }, React.createElement('i', {
                                                'data-lucide': 'calendar-clock',
                                                className: 'h-5 w-5 text-white'
                                            })),
                                            React.createElement('div', { key: 'text' }, [
                                                React.createElement('p', {
                                                    key: 'label',
                                                    className: 'text-sm font-medium text-gray-600'
                                                }, '预约时间'),
                                                React.createElement('p', {
                                                    key: 'date',
                                                    className: 'font-bold text-gray-900'
                                                }, dateTime.date),
                                                React.createElement('p', {
                                                    key: 'time',
                                                    className: 'text-blue-600 font-semibold'
                                                }, dateTime.time)
                                            ])
                                        ]),
                                        React.createElement('div', {
                                            key: 'id',
                                            className: 'flex items-center space-x-3 p-4 bg-gray-50 rounded-xl border border-gray-100'
                                        }, [
                                            React.createElement('div', {
                                                key: 'icon',
                                                className: 'p-2 bg-gray-600 rounded-lg'
                                            }, React.createElement('i', {
                                                'data-lucide': 'hash',
                                                className: 'h-5 w-5 text-white'
                                            })),
                                            React.createElement('div', { key: 'text' }, [
                                                React.createElement('p', {
                                                    key: 'label',
                                                    className: 'text-sm font-medium text-gray-600'
                                                }, '预约编号'),
                                                React.createElement('p', {
                                                    key: 'value',
                                                    className: 'font-bold text-gray-900'
                                                }, `#${appointment.id}`)
                                            ])
                                        ])
                                    ]),

                                    // Action Buttons
                                    React.createElement('div', {
                                        key: 'actions',
                                        className: 'flex flex-wrap gap-3'
                                    }, [
                                        canConsult && React.createElement('button', {
                                            key: 'consult',
                                            onClick: () => handleStartConsultation(appointment),
                                            className: 'flex-1 min-w-0 inline-flex items-center justify-center space-x-2 px-6 py-3 bg-gradient-to-r from-green-600 to-green-700 text-white rounded-xl hover:from-green-700 hover:to-green-800 transition-all duration-200 font-semibold shadow-lg hover:shadow-xl'
                                        }, [
                                            React.createElement('i', {
                                                key: 'icon',
                                                'data-lucide': 'message-circle-plus',
                                                className: 'h-5 w-5'
                                            }),
                                            React.createElement('span', { key: 'text' }, '发起咨询')
                                        ]),
                                        React.createElement('button', {
                                            key: 'details',
                                            className: 'flex-1 min-w-0 inline-flex items-center justify-center space-x-2 px-6 py-3 border-2 border-blue-200 text-blue-700 rounded-xl hover:bg-blue-50 transition-all duration-200 font-semibold'
                                        }, [
                                            React.createElement('i', {
                                                key: 'icon',
                                                'data-lucide': 'file-text',
                                                className: 'h-5 w-5'
                                            }),
                                            React.createElement('span', { key: 'text' }, '查看详情')
                                        ])
                                    ]),

                                    // Status-specific tips
                                    appointment.status === 'booked' && React.createElement('div', {
                                        key: 'tip',
                                        className: 'mt-6 p-4 bg-amber-50 border border-amber-200 rounded-xl'
                                    }, [
                                        React.createElement('div', {
                                            key: 'header',
                                            className: 'flex items-center space-x-2 mb-2'
                                        }, [
                                            React.createElement('i', {
                                                key: 'icon',
                                                'data-lucide': 'lightbulb',
                                                className: 'h-5 w-5 text-amber-600'
                                            }),
                                            React.createElement('p', {
                                                key: 'title',
                                                className: 'font-semibold text-amber-800'
                                            }, '就诊提醒')
                                        ]),
                                        React.createElement('ul', {
                                            key: 'list',
                                            className: 'text-sm text-amber-700 space-y-1'
                                        }, [
                                            React.createElement('li', { key: '1' }, '• 请提前15分钟到达医院'),
                                            React.createElement('li', { key: '2' }, '• 携带身份证件和医保卡'),
                                            React.createElement('li', { key: '3' }, '• 可通过在线咨询提前沟通')
                                        ])
                                    ])
                                ])
                            ]);
                        })
                ),

                // Quick Actions
                appointments.length > 0 && React.createElement('div', {
                    key: 'quick-actions',
                    className: 'mt-12 text-center'
                }, React.createElement('div', {
                    className: 'bg-white rounded-2xl shadow-lg border border-gray-100 p-8'
                }, [
                    React.createElement('h3', {
                        key: 'title',
                        className: 'text-xl font-semibold text-gray-900 mb-4'
                    }, '快速操作'),
                    React.createElement('div', {
                        key: 'actions',
                        className: 'flex flex-wrap justify-center gap-4'
                    }, [
                        React.createElement('a', {
                            key: 'new-appointment',
                            href: 'main.html',
                            className: 'inline-flex items-center space-x-2 px-6 py-3 bg-blue-600 text-white rounded-xl hover:bg-blue-700 transition-all duration-200 font-medium shadow-lg hover:shadow-xl'
                        }, [
                            React.createElement('i', {
                                key: 'icon',
                                'data-lucide': 'plus',
                                className: 'h-5 w-5'
                            }),
                            React.createElement('span', { key: 'text' }, '预约其他医生')
                        ]),
                        React.createElement('a', {
                            key: 'messages',
                            href: 'messages.html',
                            className: 'inline-flex items-center space-x-2 px-6 py-3 border-2 border-purple-200 text-purple-700 rounded-xl hover:bg-purple-50 transition-all duration-200 font-medium'
                        }, [
                            React.createElement('i', {
                                key: 'icon',
                                'data-lucide': 'message-square',
                                className: 'h-5 w-5'
                            }),
                            React.createElement('span', { key: 'text' }, '查看所有咨询')
                        ])
                    ])
                ]))
            ])
        ]);
    }

    // 初始化Lucide图标
    setTimeout(() => {
        if (typeof lucide !== 'undefined') {
            lucide.createIcons();
        }
    }, 100);

    ReactDOM.render(React.createElement(AppointmentsPage), document.getElementById('root'));
</script>
</body>
</html>
